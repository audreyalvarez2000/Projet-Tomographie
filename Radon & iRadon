import tomopy
import dxchange
import matplotlib.pyplot as plt
import datetime
import time
#import logging
#logging.basicConfig(level=logging.INFO)
from imagestacks import create_animation # permet de mettre une image en donn√©e dans un tableau
from IPython.core.display import HTML
import skimage



fname='/Users/leapommier/Desktop/projet multi/tilt_0_180/carteSD120321_0000.tif'
ind = [i for i in range(181)] 
print(ind)
print(fname)
proj = dxchange.reader.read_tiff_stack(fname,ind) 

img1 = proj[0,:,:]
theta = np.linspace(-90, 90., 180, endpoint=False)
sinogram1 = skimage.transform.radon(img1, theta=theta, circle=True)
added_image = cv2.addWeighted(sinogram1,0.35,sinogram1,0.35,0)

for k in range(1,181):
    img = proj[k,:,:]
    theta = np.linspace(-90, 90., 180, endpoint=False)
    sinogram = skimage.transform.radon(img, theta=theta, circle=True)
    added_image = cv2.addWeighted(added_image,0.35,sinogram,0.35,0)

cv2.imwrite('combined.png', added_image)

plt.imshow(added_image, cmap='gray')
plt.show()

reconstruction = skimage.transform.iradon(added_image, theta=theta, circle=True)
plt.imshow(reconstruction)
plt.show()
